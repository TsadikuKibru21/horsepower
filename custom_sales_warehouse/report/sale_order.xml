<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Inherit Sale Order Report Template -->
        <template id="report_saleorder_document_inherit_sales_from" inherit_id="sale.report_saleorder_document">
              <xpath expr="//h2[@class='mt-4']" position="replace">
                    <h2 class="mt-4">
                        <span t-if="env.context.get('proforma', False) or is_pro_forma">Pro-Forma Invoice # </span>
                        
                        <span t-elif="doc.state in ['draft', 'sent','to_approve','approved']">Quotation # </span>
                        <span t-elif="doc.state == 'sale'">Order # </span>
                        <span t-field="doc.name">SO0000</span>
                    </h2>
                </xpath>

            <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/thead//th[descendant::span[text()='Amount']]" position="replace">
                <th name="th_amount_total" class="text-end">
                    <span>Amount Total</span>
                </th>
            </xpath>
          
             <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/tbody//td[@name='td_subtotal' and not(ancestor::tr/@class='is-subtotal')]" position="replace">
                <td name="td_amount_total" class="text-end">
                    <span t-out="line.price_total" t-options="{'widget': 'monetary', 'display_currency': doc.currency_id}"/>
                </td>
            </xpath>
            <!-- Add total row for amount_total after the last line -->
            <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/thead/tr/th[@name='th_description']" position="before">
                <th class="text-start">No</th>
            </xpath>

            <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/tbody//td[@name='td_name']" position="before">
                <td class="text-start">
                    <span t-field="line.order_sequence"/>
                </td>
            </xpath>

            <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/thead/tr/th[@name='th_description']" position="before">
                <th class="text-start">Item Code</th>
            </xpath>

        
        <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/tbody//td[@name='td_name']" position="before">
            <td class="text-start">
                <span t-field="line.default_code.default_code"/>
            </td>
        </xpath>

        <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/thead/tr/th[@name='th_description']" position="before">
                <th class="text-start">Product</th>
        </xpath>

        <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/tbody//td[@name='td_name']" position="before">
                <td class="text-start">
                    <span t-field="line.product_id.name"/>
                </td>
        </xpath>

        <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/tbody//td[@name='td_quantity']" position="replace">
                <td name="td_quantity" class="text-end">
                    <span t-field="line.product_uom_qty">3</span>
                    <span t-if="line.product_packaging_id">
                        (<span t-field="line.product_packaging_qty" t-options="{&quot;widget&quot;: &quot;integer&quot;}"/> <span t-field="line.product_packaging_id"/>)
                    </span>
                </td>
        </xpath>

      

        <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/thead/tr/th[@name='th_quantity']" position="before">
                <th class="text-start">UOM</th>
        </xpath>

        <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/tbody//td[@name='td_quantity']" position="before">
                <td class="text-start">
                    <span t-field="line.product_uom.name"/>
                </td>
        </xpath>

        <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/thead/tr/th[@name='th_taxes']" position="replace"/>
               

        <xpath expr="//table[@class='table table-sm o_main_table table-borderless mt-4']/tbody//td[@name='td_taxes']" position="replace"/>
               
        </template>
    </data>
</odoo>
