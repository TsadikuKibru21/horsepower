<?xml version="1.0" encoding="utf-8"?>
<odoo>
 <template id="report_purchase_order_range">
    <t t-call="web.external_layout">
        <t t-set="doc" t-value="docs[0] if docs else None"/>
        <t t-if="doc">
            <t t-set="company" t-value="doc.env.company"/>
            <main>
                <div class="page">
                    <!-- Report Title and Date delinquentRange -->
                    <div class="row">
                        <div class="col-12 text-center">
                            <h2>Purchase Order Report</h2>
                            <h4>Date Range: <span t-esc="doc.date_start.strftime('%Y-%m-%d')"/> to <span t-esc="doc.date_end.strftime('%Y-%m-%d')"/></h4>
                        </div>
                    </div>

                    <!-- Purchase Orders Table -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <table class="table table-bordered" style="width: 100%; border-collapse: separate; border-spacing: 5px;">
                                <thead>
                                    <tr>
                                        <th style="width: 25%; text-align: center;">Order Reference</th>
                                        <th style="width: 25%; text-align: center;">Vendor</th>
                                        <th style="width: 25%; text-align: center;">Order Date</th>
                                        <th style="width: 25%; text-align: center;">Total Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="orders" t-value="doc.get_purchase_orders()"/>
                                    <t t-if="orders">
                                        <t t-foreach="orders" t-as="order">
                                            <tr>
                                                <td style="text-align: center;"><span t-field="order.name"/></td>
                                                <td style="text-align: center;"><span t-field="order.partner_id.name"/></td>
                                                <td style="text-align: center;"><span t-field="order.date_order" t-options='{"format": "MM/dd/yyyy"}'/></td>
                                                <td style="text-align: center;"><span t-esc="order.amount_total"/></td>
                                            </tr>
                                        </t>
                                        <tr>
                                            <td colspan="3" style="text-align: right; padding-right: 10px;"><strong>Total:</strong></td>
                                            <td style="text-align: center;">
                                                <span t-esc="sum(order.amount_total for order in orders)"/>
                                            </td>
                                        </tr>
                                    </t>
                                    <t t-else="">
                                        <tr>
                                            <td colspan="4" style="text-align: center;">No purchase orders found.</td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </main>
        </t>
        <t t-if="not doc">
            <main>
                <div class="page">
                    <h2>No Record Available</h2>
                </div>
            </main>
        </t>
    </t>
</template>
    <!-- Report Action -->
    <record id="action_report_purchase_order_range" model="ir.actions.report">
        <field name="name">Purchase Orders by Date Range</field>
        <field name="model">purchase.order.report</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">store_request.report_purchase_order_range</field>
        <field name="print_report_name">'Purchase Order Report ' + (object.date_start.strftime('%Y-%m-%d') + ' to ' + object.date_end.strftime('%Y-%m-%d'))</field>
        <field name="binding_model_id" ref="model_purchase_order_report"/>
        <field name="binding_type">report</field>
    </record>


<record id="view_purchase_report_tree" model="ir.ui.view">
    <field name="name">purchase.order.report.tree</field>
    <field name="model">purchase.order.report</field>
    <field name="arch" type="xml">
        <tree>
            <field name="date_start"/>
            <field name="date_end"/>
        </tree>
    </field>
</record>    <!-- Wizard Form -->
 
       <record id="view_purchase_report_form" model="ir.ui.view">
        <field name="name">purchase.order.report.form</field>
        <field name="model">purchase.order.report</field>
        <field name="arch" type="xml">
            <form>
           

                <sheet>
                   
                    <group>
                            <field name="date_start"/>
                            <field name="date_end"/>
                          
                   
                    </group>
<notebook>
    <page name="purchase_orders" string="Purchase Orders">
    <field name="purchase_order_ids" readonly="1">
        <tree editable="bottom">
            <field name="name"/>
            <field name="partner_id"/>
            <field name="date_order"/>
            <field name="amount_total"/>
        </tree>
        </field>
    </page>
</notebook>
                 
                </sheet>
              
            </form>
        </field>
    </record>

    <!-- Wizard Action -->
 <record id="action_purchase_report" model="ir.actions.act_window">
    <field name="name">Purchase Report</field>
    <field name="res_model">purchase.order.report</field>
    <field name="view_mode">tree,form</field>
</record>
    <menuitem
        id="menu_purchase_report"
        name="Report By Range"
        parent="purchase.purchase_report_main"
        action="action_purchase_report"
        sequence="20"/>
</odoo>